
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Unit tests &#8212; proseco 5.9.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/bootstrap-astropy.css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>
    <script type="text/javascript" src="_static/copybutton.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="API documentation" href="api.html" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'/>

  </head><body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="index.html"><span id="logotext1">Ska!</span><span id="logotext2">proseco</span><span id="logotext3"></span></a>
  <ul>
    
    <li><a class="home" title="Homepage" href="https://cxc.cfa.harvard.edu/mta/ASPECT/tool_doc">
        <span id="logotext1">ska</span><span id="logotext2">tools</span>
    </a></li>
    <li><a title="General Index" href="genindex.html">Index</a></li>
    <li><a title="Module Index" href="py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="api.html" title="API documentation">
	  &laquo; previous
	</a>
	
      </li>
      <li>
	<a href="index.html">proseco 5.9.0 documentation</a>
	 &#187;
      </li>
      
      <li>Unit tests</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="unit-tests">
<h1>Unit tests<a class="headerlink" href="#unit-tests" title="Permalink to this headline">¶</a></h1>
<section id="catalog">
<h2>Catalog<a class="headerlink" href="#catalog" title="Permalink to this headline">¶</a></h2>
</section>
<section id="acquisition">
<h2>Acquisition<a class="headerlink" href="#acquisition" title="Permalink to this headline">¶</a></h2>
</section>
<section id="module-proseco.tests.test_guide">
<span id="guide"></span><h2>Guide<a class="headerlink" href="#module-proseco.tests.test_guide" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="proseco.tests.test_guide.test_avoid_trap">
<span class="sig-prename descclassname"><span class="pre">proseco.tests.test_guide.</span></span><span class="sig-name descname"><span class="pre">test_avoid_trap</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/proseco/tests/test_guide.html#test_avoid_trap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proseco.tests.test_guide.test_avoid_trap" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up a scenario where a star is selected fine at one roll, and then
confirm that it is not selected when roll places it on the trap.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="proseco.tests.test_guide.test_bad_star_list">
<span class="sig-prename descclassname"><span class="pre">proseco.tests.test_guide.</span></span><span class="sig-name descname"><span class="pre">test_bad_star_list</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/proseco/tests/test_guide.html#test_bad_star_list"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proseco.tests.test_guide.test_bad_star_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Test that a star with ID in the bad star list is not selected.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="proseco.tests.test_guide.test_big_dither">
<span class="sig-prename descclassname"><span class="pre">proseco.tests.test_guide.</span></span><span class="sig-name descname"><span class="pre">test_big_dither</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/proseco/tests/test_guide.html#test_big_dither"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proseco.tests.test_guide.test_big_dither" title="Permalink to this definition">¶</a></dt>
<dd><p>Regression test that the expected set of agasc ids selected for “big
dither” obsid 20168 are selected.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="proseco.tests.test_guide.test_box_mag_spoiler">
<span class="sig-prename descclassname"><span class="pre">proseco.tests.test_guide.</span></span><span class="sig-name descname"><span class="pre">test_box_mag_spoiler</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/proseco/tests/test_guide.html#test_box_mag_spoiler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proseco.tests.test_guide.test_box_mag_spoiler" title="Permalink to this definition">¶</a></dt>
<dd><p>Test spoiled star rejection by manipulating a star position and magnitude
to make it spoil another star in a specific attitude/config.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="proseco.tests.test_guide.test_check_mag_spoilers">
<span class="sig-prename descclassname"><span class="pre">proseco.tests.test_guide.</span></span><span class="sig-name descname"><span class="pre">test_check_mag_spoilers</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/proseco/tests/test_guide.html#test_check_mag_spoilers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proseco.tests.test_guide.test_check_mag_spoilers" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that spoiling stars that should spoil a candidated due to the
mag/line test actually spoil the candidate star.</p>
<p>The check_mag_spoilers function sets a star to spoil another star if it
is closer than a required separation for the magnitude difference
(a faint star can be closer to a candidate star without spoiling it).
The line test is defined in the mag_spoiler parameters Intercept and Slope.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="proseco.tests.test_guide.test_check_pixmag_offset">
<span class="sig-prename descclassname"><span class="pre">proseco.tests.test_guide.</span></span><span class="sig-name descname"><span class="pre">test_check_pixmag_offset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/proseco/tests/test_guide.html#test_check_pixmag_offset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proseco.tests.test_guide.test_check_pixmag_offset" title="Permalink to this definition">¶</a></dt>
<dd><p>Test the get_pixmag_for_offset guide function.</p>
<p>get_pixmag_for_offset returns the magnitude required for an individual
pixel to spoil the centroid of a candidate star by an specified offset.
This test uses a range of pixel locations and intensities, and confirms
that for any pixel that would cause an offset in the centroid position over
the threshold given that the pixel value would be over the magnitude given
by get_pixmag_for_offset.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="proseco.tests.test_guide.test_check_spoil_contrib">
<span class="sig-prename descclassname"><span class="pre">proseco.tests.test_guide.</span></span><span class="sig-name descname"><span class="pre">test_check_spoil_contrib</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/proseco/tests/test_guide.html#test_check_spoil_contrib"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proseco.tests.test_guide.test_check_spoil_contrib" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a case where a star spoils the edge of the 8x8 (edge and then background pixel).</p>
<p>Note that for these mock stars, since we we are checking the status of
the first star, ASPQ1 needs to be nonzero on that star or the
check_spoil_contrib code will bail out before actually doing the check</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="proseco.tests.test_guide.test_check_spoiler_cases">
<span class="sig-prename descclassname"><span class="pre">proseco.tests.test_guide.</span></span><span class="sig-name descname"><span class="pre">test_check_spoiler_cases</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/proseco/tests/test_guide.html#test_check_spoiler_cases"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proseco.tests.test_guide.test_check_spoiler_cases" title="Permalink to this definition">¶</a></dt>
<dd><p>Regression test guide star selection against a star and a spoiler</p>
<p>This moves a spoiling star from center past and edge then moves a spoiling star diagonally.
This should hit check_spoil_contrib, has_spoiler_in_box, and check_mag_spoilers tests in
the guide star selection.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="proseco.tests.test_guide.test_common_column">
<span class="sig-prename descclassname"><span class="pre">proseco.tests.test_guide.</span></span><span class="sig-name descname"><span class="pre">test_common_column</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">case</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/proseco/tests/test_guide.html#test_common_column"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proseco.tests.test_guide.test_common_column" title="Permalink to this definition">¶</a></dt>
<dd><p>Test check_column_spoilers method using constructed two-star cases.
The check_column_spoilers method uses n_sigma on MAG_ACA_ERR, but this test
ignores MAG_ACA_ERR.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="proseco.tests.test_guide.test_common_column_obsid_19904">
<span class="sig-prename descclassname"><span class="pre">proseco.tests.test_guide.</span></span><span class="sig-name descname"><span class="pre">test_common_column_obsid_19904</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/proseco/tests/test_guide.html#test_common_column_obsid_19904"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proseco.tests.test_guide.test_common_column_obsid_19904" title="Permalink to this definition">¶</a></dt>
<dd><p>Confirm in a specific configuration that a star with a column spoiler,
1091705224, is not selected.  This test limits the star field
star field to just 5 stars including the star and the column spoiler</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="proseco.tests.test_guide.test_edge_star">
<span class="sig-prename descclassname"><span class="pre">proseco.tests.test_guide.</span></span><span class="sig-name descname"><span class="pre">test_edge_star</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dither</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/proseco/tests/test_guide.html#test_edge_star"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proseco.tests.test_guide.test_edge_star" title="Permalink to this definition">¶</a></dt>
<dd><p>Add stars right at row and col max for various dithers.
This test both confirms that the dark map extraction doesn’t break and that
the stars can still be selected.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="proseco.tests.test_guide.test_get_ax_range">
<span class="sig-prename descclassname"><span class="pre">proseco.tests.test_guide.</span></span><span class="sig-name descname"><span class="pre">test_get_ax_range</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/proseco/tests/test_guide.html#test_get_ax_range"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proseco.tests.test_guide.test_get_ax_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Confirm that the ranges from get_ax_range are reasonable for a variety of
center pixel locations and extents (extent = 4 + pix_dither)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="proseco.tests.test_guide.test_guides_include_bad">
<span class="sig-prename descclassname"><span class="pre">proseco.tests.test_guide.</span></span><span class="sig-name descname"><span class="pre">test_guides_include_bad</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/proseco/tests/test_guide.html#test_guides_include_bad"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proseco.tests.test_guide.test_guides_include_bad" title="Permalink to this definition">¶</a></dt>
<dd><p>Test include stars for guide where star is bad for some reason.</p>
<ul class="simple">
<li><p>Including a class=1 star on the CCD is allowed.</p></li>
<li><p>Including a star (otherwise acceptable) just off the CCD is not allowed.</p></li>
</ul>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="proseco.tests.test_guide.test_guides_include_exclude">
<span class="sig-prename descclassname"><span class="pre">proseco.tests.test_guide.</span></span><span class="sig-name descname"><span class="pre">test_guides_include_exclude</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/proseco/tests/test_guide.html#test_guides_include_exclude"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proseco.tests.test_guide.test_guides_include_exclude" title="Permalink to this definition">¶</a></dt>
<dd><p>Test include and exclude stars for guide.  This uses a catalog with 11 stars:
- 8 bright stars from 7.0 to 7.7 mag, where the 7.0 is EXCLUDED
- 2 faint (but OK) stars 10.0, 10.1 where the 10.0 is INCLUDED
- 1 very faint (bad) stars 12.0 mag is INCLUDED</p>
<p>Both the 7.0 and 10.1 would normally get picked either initially
or swapped in during optimization, and 12.0 would never get picked.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="proseco.tests.test_guide.test_make_report_guide">
<span class="sig-prename descclassname"><span class="pre">proseco.tests.test_guide.</span></span><span class="sig-name descname"><span class="pre">test_make_report_guide</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tmpdir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/proseco/tests/test_guide.html#test_make_report_guide"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proseco.tests.test_guide.test_make_report_guide" title="Permalink to this definition">¶</a></dt>
<dd><p>Test making a guide report.  Use a big-box dither here
to test handling of that in report (after passing through pickle).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="proseco.tests.test_guide.test_obsid_19461">
<span class="sig-prename descclassname"><span class="pre">proseco.tests.test_guide.</span></span><span class="sig-name descname"><span class="pre">test_obsid_19461</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/proseco/tests/test_guide.html#test_obsid_19461"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proseco.tests.test_guide.test_obsid_19461" title="Permalink to this definition">¶</a></dt>
<dd><p>Regression tests that 5 expected agasc ids are selected in a poor star field
corresponding to obsid 19461.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="proseco.tests.test_guide.test_overlap_spoiler">
<span class="sig-prename descclassname"><span class="pre">proseco.tests.test_guide.</span></span><span class="sig-name descname"><span class="pre">test_overlap_spoiler</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/proseco/tests/test_guide.html#test_overlap_spoiler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proseco.tests.test_guide.test_overlap_spoiler" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a brighter “spoiler” that is a good guide star and confirm the test for
overlapping selected stars works until just past (12 pixels).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="proseco.tests.test_guide.test_overlap_spoiler_include">
<span class="sig-prename descclassname"><span class="pre">proseco.tests.test_guide.</span></span><span class="sig-name descname"><span class="pre">test_overlap_spoiler_include</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/proseco/tests/test_guide.html#test_overlap_spoiler_include"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proseco.tests.test_guide.test_overlap_spoiler_include" title="Permalink to this definition">¶</a></dt>
<dd><p>Add test for overlap-star handling in cases where one or both
stars is in includes_ids_guide.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="proseco.tests.test_guide.test_pix_spoiler">
<span class="sig-prename descclassname"><span class="pre">proseco.tests.test_guide.</span></span><span class="sig-name descname"><span class="pre">test_pix_spoiler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">case</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/proseco/tests/test_guide.html#test_pix_spoiler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proseco.tests.test_guide.test_pix_spoiler" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that for various dither configurations, a hot pixel near a star will
result in that star not being selected.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="proseco.tests.test_guide.test_region_contrib">
<span class="sig-prename descclassname"><span class="pre">proseco.tests.test_guide.</span></span><span class="sig-name descname"><span class="pre">test_region_contrib</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/proseco/tests/test_guide.html#test_region_contrib"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proseco.tests.test_guide.test_region_contrib" title="Permalink to this definition">¶</a></dt>
<dd><p>Regression test of stars rejected by contributing starlight to readout region.</p>
<p>Scenario test for too much light contribution by a spoiler star unto the
region of a candidate star… by excluding and then including the spoiler
star amongst the stars in the star field and confirming that the candidate
is not selected when the spoiler star is included.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="proseco.tests.test_guide.test_select">
<span class="sig-prename descclassname"><span class="pre">proseco.tests.test_guide.</span></span><span class="sig-name descname"><span class="pre">test_select</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/proseco/tests/test_guide.html#test_select"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proseco.tests.test_guide.test_select" title="Permalink to this definition">¶</a></dt>
<dd><p>Regression test that 5 expected agasc ids are selected at an arbitrary ra/dec/roll .</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="proseco.tests.test_guide.test_warnings">
<span class="sig-prename descclassname"><span class="pre">proseco.tests.test_guide.</span></span><span class="sig-name descname"><span class="pre">test_warnings</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/proseco/tests/test_guide.html#test_warnings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#proseco.tests.test_guide.test_warnings" title="Permalink to this definition">¶</a></dt>
<dd><p>Test that the ACACatalogTable warnings infrastructure works via a
specific expected warning in get_guide_catalog (too few stars selected).</p>
</dd></dl>

</section>
<section id="fid">
<h2>Fid<a class="headerlink" href="#fid" title="Permalink to this headline">¶</a></h2>
</section>
<section id="core">
<h2>Core<a class="headerlink" href="#core" title="Permalink to this headline">¶</a></h2>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">Unit tests</a><ul>
<li><a class="reference internal" href="#catalog">Catalog</a></li>
<li><a class="reference internal" href="#acquisition">Acquisition</a></li>
<li><a class="reference internal" href="#module-proseco.tests.test_guide">Guide</a></li>
<li><a class="reference internal" href="#fid">Fid</a></li>
<li><a class="reference internal" href="#core">Core</a></li>
</ul>
</li>
</ul>


  <h4>Previous topic</h4>
  <p class="topless"><a href="api.html"
                        title="previous chapter">API documentation</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/unit_tests.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<form action="search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="_sources/unit_tests.rst.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2018, Tom Aldcroft, Jean Connelly.<br/>
    Created using <a href="http://www.sphinx-doc.org/en/stable/">Sphinx</a> 4.2.0. &nbsp;
  </p>
</footer>
  </body>
</html>